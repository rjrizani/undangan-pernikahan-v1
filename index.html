<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wedding of Amanda & Budi</title>

    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts for elegant typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons for modern icons -->
    <script src="https://unpkg.com/lucide-react@latest/dist/lucide-react.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* Custom styles for fonts and animations */
        body {
            font-family: 'Lato', sans-serif;
            background-color: #F8F5F2;
            /* Soft beige background */
            color: #5D4037;
            /* Brownish text color */
        }

        h1,
        h2,
        h3,
        .font-serif {
            font-family: 'Playfair Display', serif;
        }

        .hero-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('https://placehold.co/1200x800/a2a2a2/ffffff?text=Foto+Pre-wedding');
            background-size: cover;
            background-position: center;
        }

        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .modal {
            transition: opacity 0.3s ease;
        }
    </style>
</head>

<body class="antialiased">

    <!-- ===== Hero Section ===== -->
    <header class="hero-bg h-screen flex flex-col items-center justify-center text-white text-center p-4">
        <div class="bg-black bg-opacity-30 p-8 rounded-lg shadow-2xl">
            <p class="text-lg md:text-2xl tracking-widest uppercase mb-4 font-light">Kami Mengundang Anda ke Pernikahan
            </p>
            <h1 class="text-5xl md:text-8xl font-bold mb-2">Amanda & Budi</h1>
            <p class="text-xl md:text-3xl font-light">15 . 12 . 2025</p>

            <!-- Countdown Timer -->
            <div id="countdown" class="flex justify-center space-x-4 md:space-x-8 mt-8 text-lg md:text-2xl">
                <div><span id="days" class="text-3xl md:text-5xl font-bold">00</span><br>Hari</div>
                <div><span id="hours" class="text-3xl md:text-5xl font-bold">00</span><br>Jam</div>
                <div><span id="minutes" class="text-3xl md:text-5xl font-bold">00</span><br>Menit</div>
                <div><span id="seconds" class="text-3xl md:text-5xl font-bold">00</span><br>Detik</div>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto">
        <!-- ===== Couple Section ===== -->
        <section class="py-20 px-6 text-center fade-in-section">
            <h2 class="text-4xl md:text-5xl mb-4">Mempelai</h2>
            <p class="max-w-2xl mx-auto text-gray-600 mb-12">
                "Dan di antara tanda-tanda kekuasaan-Nya ialah Dia menciptakan untukmu isteri-isteri dari jenismu
                sendiri, supaya kamu cenderung dan merasa tenteram kepadanya, dan dijadikan-Nya diantaramu rasa kasih
                dan sayang."
                <br><span class="font-bold mt-2 block">(QS. Ar-Rum: 21)</span>
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div class="flex flex-col items-center">
                    <img src="https://placehold.co/200x200/a2a2a2/ffffff?text=Foto+Mempelai+Wanita" alt="Amanda"
                        class="w-40 h-40 rounded-full object-cover shadow-lg mb-4 border-4 border-white">
                    <h3 class="text-3xl font-serif">Amanda Larasati</h3>
                    <p class="text-gray-500 mt-1">Putri dari Bapak John Doe & Ibu Jane Doe</p>
                </div>
                <div class="flex flex-col items-center">
                    <img src="https://placehold.co/200x200/a2a2a2/ffffff?text=Foto+Mempelai+Pria" alt="Budi"
                        class="w-40 h-40 rounded-full object-cover shadow-lg mb-4 border-4 border-white">
                    <h3 class="text-3xl font-serif">Budi Santoso</h3>
                    <p class="text-gray-500 mt-1">Putra dari Bapak Richard Roe & Ibu Mary Roe</p>
                </div>
            </div>
        </section>

        <!-- ===== Event Details Section ===== -->
        <section class="py-20 px-6 bg-white rounded-xl shadow-md fade-in-section">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl mb-2">Detail Acara</h2>
                <p class="text-gray-600">Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila
                    Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa restu.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-center">
                <!-- Akad Nikah -->
                <div class="bg-gray-50 p-8 rounded-lg shadow-sm">
                    <h3 class="text-3xl font-serif mb-4">Akad Nikah</h3>
                    <p class="font-bold text-lg">Sabtu, 15 Desember 2025</p>
                    <p class="text-gray-600">Pukul 09:00 - 10:00 WIB</p>
                    <p class="mt-4 font-semibold">Masjid Istiqlal</p>
                    <p class="text-gray-500 text-sm">Jl. Taman Wijaya Kusuma, Ps. Baru, Kecamatan Sawah Besar, Kota
                        Jakarta Pusat</p>
                    <a href="https://www.google.com/maps/place/Masjid+Istiqlal" target="_blank"
                        class="mt-4 inline-block bg-[#5D4037] text-white px-6 py-2 rounded-full hover:bg-opacity-90 transition-colors">Lihat
                        Peta</a>
                </div>
                <!-- Resepsi -->
                <div class="bg-gray-50 p-8 rounded-lg shadow-sm">
                    <h3 class="text-3xl font-serif mb-4">Resepsi</h3>
                    <p class="font-bold text-lg">Sabtu, 15 Desember 2025</p>
                    <p class="text-gray-600">Pukul 12:00 - 15:00 WIB</p>
                    <p class="mt-4 font-semibold">Balai Kartini</p>
                    <p class="text-gray-500 text-sm">Jl. Gatot Subroto No.Kav. 37, RT.6/RW.3, Kuningan, Kuningan Tim.,
                        Kecamatan Setiabudi, Kota Jakarta Selatan</p>
                    <a href="https://www.google.com/maps/place/Balai+Kartini" target="_blank"
                        class="mt-4 inline-block bg-[#5D4037] text-white px-6 py-2 rounded-full hover:bg-opacity-90 transition-colors">Lihat
                        Peta</a>
                </div>
            </div>
        </section>

        <!-- ===== Gallery Section ===== -->
        <section class="py-20 px-6 text-center fade-in-section">
            <h2 class="text-4xl md:text-5xl mb-8">Galeri Kami</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <img src="https://placehold.co/400x400/a2a2a2/ffffff?text=Foto+1" alt="Gallery Photo 1"
                    class="rounded-lg shadow-md w-full h-full object-cover cursor-pointer transform hover:scale-105 transition-transform">
                <img src="https://placehold.co/400x600/a2a2a2/ffffff?text=Foto+2" alt="Gallery Photo 2"
                    class="rounded-lg shadow-md w-full h-full object-cover cursor-pointer transform hover:scale-105 transition-transform md:col-span-1">
                <img src="https://placehold.co/400x400/a2a2a2/ffffff?text=Foto+3" alt="Gallery Photo 3"
                    class="rounded-lg shadow-md w-full h-full object-cover cursor-pointer transform hover:scale-105 transition-transform">
                <img src="https://placehold.co/400x600/a2a2a2/ffffff?text=Foto+4" alt="Gallery Photo 4"
                    class="rounded-lg shadow-md w-full h-full object-cover cursor-pointer transform hover:scale-105 transition-transform md:col-span-1">
                <img src="https://placehold.co/400x400/a2a2a2/ffffff?text=Foto+5" alt="Gallery Photo 5"
                    class="rounded-lg shadow-md w-full h-full object-cover cursor-pointer transform hover:scale-105 transition-transform">
                <img src="https://placehold.co/400x400/a2a2a2/ffffff?text=Foto+6" alt="Gallery Photo 6"
                    class="rounded-lg shadow-md w-full h-full object-cover cursor-pointer transform hover:scale-105 transition-transform">
            </div>
        </section>

        <!-- ===== Guestbook/Wishes Section ===== -->
        <section class="py-20 px-6 bg-white rounded-xl shadow-md fade-in-section">
            <h2 class="text-4xl md:text-5xl text-center mb-8">Buku Tamu & Ucapan</h2>
            <form id="wish-form" class="max-w-xl mx-auto">
                <div class="mb-4">
                    <label for="name" class="block text-gray-700 mb-1">Nama</label>
                    <input type="text" id="name" name="name"
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5D4037]"
                        required>
                </div>
                <div class="mb-4">
                    <label for="wish" class="block text-gray-700 mb-1">Ucapan & Doa</label>
                    <textarea id="wish" name="wish" rows="4"
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5D4037]"
                        required></textarea>
                </div>
                <button type="submit"
                    class="w-full bg-[#5D4037] text-white px-6 py-3 rounded-lg hover:bg-opacity-90 transition-colors flex items-center justify-center"
                    id="submit-btn">
                    <span id="submit-text">Kirim Ucapan</span>
                    <svg id="submit-spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>
                </button>
            </form>
            <div class="mt-12 max-w-xl mx-auto">
                <h3 class="text-2xl font-serif mb-4 text-center">Ucapan Hangat</h3>
                <div id="wishes-list" class="space-y-4 max-h-80 overflow-y-auto pr-2">
                    <!-- Wishes from Firebase will be loaded here -->
                    <p id="loading-wishes" class="text-center text-gray-500">Memuat ucapan...</p>
                </div>
            </div>
        </section>

    </main>

    <!-- ===== Footer ===== -->
    <footer class="text-center py-12 mt-12">
        <p class="text-2xl font-serif">Terima Kasih</p>
        <h3 class="text-4xl md:text-5xl font-serif mt-2 mb-4">Amanda & Budi</h3>
        <p class="text-gray-500">&copy; 2025. Dibuat dengan penuh cinta.</p>
    </footer>

    <!-- ===== Audio Player ===== -->
    <audio id="background-music" loop>
        <source src="" type="audio/mpeg">
    </audio>
    <button id="play-pause-btn" class="fixed bottom-5 right-5 bg-white p-3 rounded-full shadow-lg text-[#5D4037]">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-play">
            <polygon points="6 3 20 12 6 21 6 3" />
        </svg>
    </button>

    <!-- Simple Modal for form submission -->
    <div id="thank-you-modal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="bg-white p-8 rounded-lg shadow-xl text-center">
            <h3 class="text-2xl font-serif mb-2">Terima Kasih!</h3>
            <p>Ucapan Anda telah terkirim dan akan segera tampil.</p>
            <button id="close-modal-btn" class="mt-4 bg-[#5D4037] text-white px-6 py-2 rounded-full">Tutup</button>
        </div>
    </div>

    <!-- ===== START: Firebase Integration Script ===== -->
    <!-- Import Firebase SDKs -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // =================================================================================
        // TODO: GANTI DENGAN KONFIGURASI FIREBASE ANDA DARI LANGKAH 1
        // =================================================================================
        const firebaseConfig = {
            apiKey: "AIzaSyDXZtu5j8IRupsm_Eq0HX0b8vAYebIFLb0",
            authDomain: "undangan-pernikahan-f171c.firebaseapp.com",
            projectId: "undangan-pernikahan-f171c",
            storageBucket: "undangan-pernikahan-f171c.firebasestorage.app",
            messagingSenderId: "975685980690",
            appId: "1:975685980690:web:24bfdf9b17347a1ca27ecb",
            measurementId: "G-G0Q709KGW9"
        };
        // =================================================================================

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Get elements
        const wishForm = document.getElementById('wish-form');
        const wishesList = document.getElementById('wishes-list');
        const loadingWishes = document.getElementById('loading-wishes');
        const modal = document.getElementById('thank-you-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const submitBtn = document.getElementById('submit-btn');
        const submitText = document.getElementById('submit-text');
        const submitSpinner = document.getElementById('submit-spinner');

        // Function to load and display wishes in real-time
        function loadWishes() {
            const wishesCol = collection(db, 'wishes');
            const q = query(wishesCol, orderBy('createdAt', 'desc'));

            onSnapshot(q, (snapshot) => {
                loadingWishes.style.display = 'none';
                wishesList.innerHTML = '';
                if (snapshot.empty) {
                    wishesList.innerHTML = '<p class="text-center text-gray-500">Jadilah yang pertama mengirim ucapan!</p>';
                } else {
                    snapshot.forEach(doc => {
                        const wish = doc.data();
                        const newWishElement = document.createElement('div');
                        newWishElement.className = 'bg-gray-50 p-4 rounded-lg animate-fade-in';
                        const safeName = document.createTextNode(wish.name).textContent;
                        const safeWish = document.createTextNode(wish.wish).textContent;
                        newWishElement.innerHTML = `<p class="font-bold">${safeName}</p><p class="text-gray-600 whitespace-pre-wrap">${safeWish}</p>`;
                        wishesList.appendChild(newWishElement);
                    });
                }
            }, (error) => { // <<< INI BAGIAN BARU UNTUK MENANGKAP ERROR
                console.error("Error fetching wishes: ", error);
                loadingWishes.style.display = 'none';
                wishesList.innerHTML = `<div class="text-center text-red-600 bg-red-100 p-4 rounded-lg">
                    <p class="font-bold">Gagal memuat ucapan.</p>
                    <p class="text-sm">Ini mungkin karena indeks Firestore belum dibuat. Silakan periksa console browser (F12) untuk link pembuatan indeks.</p>
                </div>`;
            });
        }

        // Sign in user anonymously to allow writing to Firestore
        signInAnonymously(auth)
            .then(() => {
                console.log("Signed in anonymously");
                loadWishes();
            })
            .catch((error) => {
                console.error("Anonymous sign-in failed:", error);
                wishesList.innerHTML = `<p class="text-center text-red-500">Gagal terhubung ke server. Coba muat ulang halaman.</p>`;
            });

        // Handle form submission
        wishForm.addEventListener('submit', async function (e) {
            e.preventDefault();

            submitText.classList.add('hidden');
            submitSpinner.classList.remove('hidden');
            submitBtn.disabled = true;

            const name = this.elements['name'].value;
            const wish = this.elements['wish'].value;

            try {
                await addDoc(collection(db, "wishes"), {
                    name: name,
                    wish: wish,
                    createdAt: serverTimestamp()
                });
                this.reset();
                modal.classList.remove('opacity-0', 'pointer-events-none');
            } catch (error) {
                console.error("Error adding document: ", error);
                alert("Maaf, terjadi kesalahan saat mengirim ucapan. Silakan coba lagi.");
            } finally {
                submitText.classList.remove('hidden');
                submitSpinner.classList.add('hidden');
                submitBtn.disabled = false;
            }
        });

        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('opacity-0', 'pointer-events-none');
        });
        // Handle form submission
        wishForm.addEventListener('submit', async function (e) {
            e.preventDefault();

            // Show spinner and disable button
            submitText.classList.add('hidden');
            submitSpinner.classList.remove('hidden');
            submitBtn.disabled = true;

            const name = this.elements['name'].value;
            const wish = this.elements['wish'].value;

            try {
                // Add a new document with a generated id.
                await addDoc(collection(db, "wishes"), {
                    name: name,
                    wish: wish,
                    createdAt: serverTimestamp() // Add server timestamp
                });

                // Clear the form
                this.reset();

                // Show the thank you modal
                modal.classList.remove('opacity-0', 'pointer-events-none');

            } catch (error) {
                console.error("Error adding document: ", error);
                alert("Maaf, terjadi kesalahan saat mengirim ucapan. Silakan coba lagi.");
            } finally {
                // Hide spinner and re-enable button
                submitText.classList.remove('hidden');
                submitSpinner.classList.add('hidden');
                submitBtn.disabled = false;
            }
        });

        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('opacity-0', 'pointer-events-none');
        });
    </script>
    <!-- ===== END: Firebase Integration Script ===== -->


    <script>
        // ===== Countdown Timer Logic =====
        const countdownDate = new Date("Dec 15, 2025 09:00:00").getTime();
        const countdownFunction = setInterval(() => {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById("days").innerText = days.toString().padStart(2, '0');
            document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
            document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
            document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
            if (distance < 0) {
                clearInterval(countdownFunction);
                document.getElementById("countdown").innerHTML = "<div class='text-3xl'>The day is here!</div>";
            }
        }, 1000);

        // ===== Scroll Animation Logic =====
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        sections.forEach(section => { observer.observe(section); });

        // ===== Audio Player Logic =====
        const audio = document.getElementById('background-music');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play"><polygon points="6 3 20 12 6 21 6 3"/></svg>`;
        const pauseIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pause"><rect x="14" y="4" width="4" height="16" rx="1"/><rect x="6" y="4" width="4" height="16" rx="1"/></svg>`;
        playPauseBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playPauseBtn.innerHTML = pauseIcon;
            } else {
                audio.pause();
                playPauseBtn.innerHTML = playIcon;
            }
        });
        document.body.addEventListener('click', () => {
            if (audio.paused) {
                audio.play().catch(e => console.log("Audio autoplay was prevented."));
                playPauseBtn.innerHTML = pauseIcon;
            }
        }, { once: true });
    </script>
</body>

</html>